import 'package:flutter/material.dart';// üéØ SABO ARENA - Double Elimination Bracket

import '../components/bracket_components.dart';// Complete Double Elimination tournament format implementation



class DoubleEliminationBracket extends StatelessWidget {import 'package:flutter/material.dart';

  final int playerCount;import '../components/bracket_components.dart';

  final VoidCallback? onFullscreenTap;import '../shared/tournament_data_generator.dart';



  const DoubleEliminationBracket({class DoubleEliminationBracket extends StatelessWidget {

    super.key,  final int playerCount;

    required this.playerCount,  final VoidCallback? onFullscreenTap;

    this.onFullscreenTap,

  });  const DoubleEliminationBracket({

    super.key,

  @override    required this.playerCount,

  Widget build(BuildContext context) {    this.onFullscreenTap,

    return BracketContainer(  });

      title: 'Double Elimination',

      subtitle: '$playerCount players',  @override

      onFullscreenTap: onFullscreenTap,  Widget build(BuildContext context) {

      onInfoTap: () => _showInfo(context),    return BracketContainer(

      child: const Center(      title: 'Double Elimination',

        child: Text(      subtitle: '$playerCount players',

          'Double Elimination\nComing Soon...',      onFullscreenTap: onFullscreenTap,

          textAlign: TextAlign.center,      onInfoTap: () => _showDoubleEliminationInfo(context),

          style: TextStyle(fontSize: 16, color: Colors.grey),      child: _buildBracketContent(context),

        ),    );

      ),  }

    );

  }  Widget _buildBracketContent(BuildContext context) {

    return const Center(

  void _showInfo(BuildContext context) {      child: Text(

    showDialog(        'Double Elimination\nComing Soon...',

      context: context,        textAlign: TextAlign.center,

      builder: (context) => AlertDialog(        style: TextStyle(

        title: const Text('Double Elimination'),          fontSize: 16,

        content: const Text('üéØ M·ªói player c√≥ 2 c∆° h·ªôi\nüèÜ Winners Bracket + Losers Bracket\nüèÖ Grand Final v·ªõi bracket reset'),          color: Colors.grey,

        actions: [        ),

          TextButton(      ),

            onPressed: () => Navigator.of(context).pop(),    );

            child: const Text('ƒê√≥ng'),  }

          ),

        ],  void _showSingleEliminationInfo(BuildContext context) {

      ),    showDialog(

    );      context: context,

  }      builder: (context) => AlertDialog(

}        title: const Row(

          children: [

class DoubleEliminationFullscreenDialog extends StatelessWidget {            Icon(Icons.info_outline, color: Colors.blue),

  final int playerCount;            SizedBox(width: 8),

            Text('Single Elimination'),

  const DoubleEliminationFullscreenDialog({          ],

    super.key,        ),

    required this.playerCount,        content: const SingleChildScrollView(

  });          child: Column(

            crossAxisAlignment: CrossAxisAlignment.start,

  @override            mainAxisSize: MainAxisSize.min,

  Widget build(BuildContext context) {            children: [

    return Dialog.fullscreen(              Text(

      child: Scaffold(                'H√¨nh th·ª©c thi ƒë·∫•u lo·∫°i tr·ª±c ti·∫øp',

        appBar: AppBar(                style: TextStyle(

          title: Text('Double Elimination - $playerCount Players'),                  fontSize: 16,

          leading: IconButton(                  fontWeight: FontWeight.bold,

            icon: const Icon(Icons.close),                ),

            onPressed: () => Navigator.of(context).pop(),              ),

          ),              SizedBox(height: 12),

        ),              Text(

        body: const Center(                'üéØ Nguy√™n t·∫Øc c∆° b·∫£n:',

          child: Text('Double Elimination Fullscreen\nComing Soon...'),                style: TextStyle(

        ),                  fontSize: 14,

      ),                  fontWeight: FontWeight.bold,

    );                  color: Colors.green,

  }                ),

}              ),
              SizedBox(height: 4),
              Text('‚Ä¢ M·ªói ng∆∞·ªùi ch∆°i ch·ªâ ƒë∆∞·ª£c thua 1 l·∫ßn duy nh·∫•t'),
              Text('‚Ä¢ Thua 1 tr·∫≠n = b·ªã lo·∫°i kh·ªèi gi·∫£i ƒë·∫•u'),
              Text('‚Ä¢ Ng∆∞·ªùi th·∫Øng ti·∫øn v√†o v√≤ng ti·∫øp theo'),
              Text('‚Ä¢ Ch·ªâ c√≤n 1 ng∆∞·ªùi cu·ªëi c√πng = V√¥ ƒë·ªãch'),
              SizedBox(height: 12),
              Text(
                '‚ö° ƒê·∫∑c ƒëi·ªÉm:',
                style: TextStyle(
                  fontSize: 14,
                  fontWeight: FontWeight.bold,
                  color: Colors.orange,
                ),
              ),
              SizedBox(height: 4),
              Text('‚Ä¢ Nhanh v√† ƒë∆°n gi·∫£n'),
              Text('‚Ä¢ S·ªë tr·∫≠n √≠t nh·∫•t'),
              Text('‚Ä¢ Kh√¥ng c√≥ c∆° h·ªôi s·ª≠a sai'),
              Text('‚Ä¢ T√≠nh k·ªãch t√≠nh cao'),
              SizedBox(height: 12),
              Text(
                'üèÜ ·ª®ng d·ª•ng:',
                style: TextStyle(
                  fontSize: 14,
                  fontWeight: FontWeight.bold,
                  color: Colors.purple,
                ),
              ),
              SizedBox(height: 4),
              Text('‚Ä¢ C√°c gi·∫£i ƒë·∫•u l·ªõn (World Cup, Olympics)'),
              Text('‚Ä¢ Gi·∫£i ƒë·∫•u c√≥ th·ªùi gian h·∫°n ch·∫ø'),
              Text('‚Ä¢ Khi c·∫ßn x√°c ƒë·ªãnh nh√† v√¥ ƒë·ªãch nhanh'),
            ],
          ),
        ),
        actions: [
          TextButton(
            onPressed: () => Navigator.of(context).pop(),
            child: const Text('ƒê√≥ng'),
          ),
        ],
      ),
    );
  }
}

// Full screen dialog for Single Elimination
class SingleEliminationFullscreenDialog extends StatelessWidget {
  final int playerCount;

  const SingleEliminationFullscreenDialog({
    super.key,
    required this.playerCount,
  });

  @override
  Widget build(BuildContext context) {
    final rounds = TournamentDataGenerator.calculateSingleEliminationRounds(playerCount);
    
    return Dialog.fullscreen(
      child: Scaffold(
        appBar: AppBar(
          title: Text('Single Elimination - $playerCount Players'),
          leading: IconButton(
            icon: const Icon(Icons.close),
            onPressed: () => Navigator.of(context).pop(),
          ),
          actions: [
            IconButton(
              icon: const Icon(Icons.info_outline),
              onPressed: () => _showSingleEliminationInfo(context),
            ),
          ],
        ),
        body: SingleChildScrollView(
          scrollDirection: Axis.horizontal,
          child: SingleChildScrollView(
            scrollDirection: Axis.vertical,
            padding: const EdgeInsets.all(16),
            child: IntrinsicHeight(
              child: Row(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: rounds.asMap().entries.map((entry) {
                  final index = entry.key;
                  final round = entry.value;
                  
                  return RoundColumn(
                    title: round['title'],
                    matches: round['matches'],
                    roundIndex: index,
                    totalRounds: rounds.length,
                    isFullscreen: true,
                  );
                }).toList(),
              ),
            ),
          ),
        ),
      ),
    );
  }

  void _showSingleEliminationInfo(BuildContext context) {
    showDialog(
      context: context,
      builder: (context) => AlertDialog(
        title: const Row(
          children: [
            Icon(Icons.info_outline, color: Colors.blue),
            SizedBox(width: 8),
            Text('Single Elimination'),
          ],
        ),
        content: const SingleChildScrollView(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            mainAxisSize: MainAxisSize.min,
            children: [
              Text(
                'H√¨nh th·ª©c thi ƒë·∫•u lo·∫°i tr·ª±c ti·∫øp',
                style: TextStyle(
                  fontSize: 16,
                  fontWeight: FontWeight.bold,
                ),
              ),
              SizedBox(height: 12),
              Text(
                'üéØ Nguy√™n t·∫Øc c∆° b·∫£n:',
                style: TextStyle(
                  fontSize: 14,
                  fontWeight: FontWeight.bold,
                  color: Colors.green,
                ),
              ),
              SizedBox(height: 4),
              Text('‚Ä¢ M·ªói ng∆∞·ªùi ch∆°i ch·ªâ ƒë∆∞·ª£c thua 1 l·∫ßn duy nh·∫•t'),
              Text('‚Ä¢ Thua 1 tr·∫≠n = b·ªã lo·∫°i kh·ªèi gi·∫£i ƒë·∫•u'),
              Text('‚Ä¢ Ng∆∞·ªùi th·∫Øng ti·∫øn v√†o v√≤ng ti·∫øp theo'),
              Text('‚Ä¢ Ch·ªâ c√≤n 1 ng∆∞·ªùi cu·ªëi c√πng = V√¥ ƒë·ªãch'),
              SizedBox(height: 12),
              Text(
                '‚ö° ƒê·∫∑c ƒëi·ªÉm:',
                style: TextStyle(
                  fontSize: 14,
                  fontWeight: FontWeight.bold,
                  color: Colors.orange,
                ),
              ),
              SizedBox(height: 4),
              Text('‚Ä¢ Nhanh v√† ƒë∆°n gi·∫£n'),
              Text('‚Ä¢ S·ªë tr·∫≠n √≠t nh·∫•t'),
              Text('‚Ä¢ Kh√¥ng c√≥ c∆° h·ªôi s·ª≠a sai'),
              Text('‚Ä¢ T√≠nh k·ªãch t√≠nh cao'),
              SizedBox(height: 12),
              Text(
                'üèÜ ·ª®ng d·ª•ng:',
                style: TextStyle(
                  fontSize: 14,
                  fontWeight: FontWeight.bold,
                  color: Colors.purple,
                ),
              ),
              SizedBox(height: 4),
              Text('‚Ä¢ C√°c gi·∫£i ƒë·∫•u l·ªõn (World Cup, Olympics)'),
              Text('‚Ä¢ Gi·∫£i ƒë·∫•u c√≥ th·ªùi gian h·∫°n ch·∫ø'),
              Text('‚Ä¢ Khi c·∫ßn x√°c ƒë·ªãnh nh√† v√¥ ƒë·ªãch nhanh'),
            ],
          ),
        ),
        actions: [
          TextButton(
            onPressed: () => Navigator.of(context).pop(),
            child: const Text('ƒê√≥ng'),
          ),
        ],
      ),
    );
  }
}